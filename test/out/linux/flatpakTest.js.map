{"version":3,"file":"flatpakTest.js","sourceRoot":"","sources":["../../src/linux/flatpakTest.ts"],"names":[],"mappings":";;AAAA,uDAA2C;AAC3C,sDAA2C;AAE3C,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAC5C,IAAA,gBAAG,EAAC,MAAM,EAAE;IACV,OAAO,EAAE,2BAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;IAC/C,MAAM,EAAE;QACN,aAAa,EAAE;YACb,SAAS,EAAE,IAAI;YACf,sBAAsB,EAAE,IAAI;YAC5B,oCAAoC,EAAE,IAAI;YAC1C,6BAA6B,EAAE,IAAI;YACnC,qCAAqC,EAAE,IAAI;YAC3C,mBAAmB,EAAE,IAAI;YACzB,oCAAoC,EAAE,IAAI;YAC1C,gCAAgC,EAAE,SAAS,EAAE,uDAAuD;SACrG;KACF;CACF,CAAC,CACH,CAAA;AAED,IAAI,CAAC,cAAc,CAAC,sBAAsB,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CACzD,IAAA,gBAAG,EAAC,MAAM,EAAE;IACV,OAAO,EAAE,2BAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;IAC/C,MAAM,EAAE;QACN,OAAO,EAAE;YACP,eAAe,EAAE,IAAI;SACtB;KACF;CACF,CAAC,CACH,CAAA;AAED,IAAI,CAAC,cAAc,CAAC,mBAAmB,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CACtD,IAAA,gBAAG,EAAC,MAAM,EAAE;IACV,OAAO,EAAE,2BAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;IAC/C,MAAM,EAAE;QACN,OAAO,EAAE;YACP,UAAU,EAAE;gBACV,UAAU;gBACV,kBAAkB;gBAClB,aAAa;gBACb,UAAU;gBACV,cAAc;gBACd,eAAe;gBACf,qBAAqB;gBACrB,mCAAmC;gBACnC,iBAAiB;gBACjB,sCAAsC;gBACtC,2CAA2C;aAC5C;SACF;KACF;CACF,CAAC,CACH,CAAA;AAED,IAAI,CAAC,cAAc,CAAC,qCAAqC,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CACxE,IAAA,gBAAG,EAAC,MAAM,EAAE;IACV,OAAO,EAAE,2BAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC;IAC/C,MAAM,EAAE;QACN,OAAO,EAAE;YACP,cAAc,EAAE,OAAO;YACvB,WAAW,EAAE,OAAO;SACrB;KACF;CACF,CAAC,CACH,CAAA","sourcesContent":["import { Platform } from \"electron-builder\"\nimport { app } from \"../helpers/packTester\"\n\ntest.ifDevOrLinuxCi(\"flatpak\", ({ expect }) =>\n  app(expect, {\n    targets: Platform.LINUX.createTarget(\"flatpak\"),\n    config: {\n      electronFuses: {\n        runAsNode: true,\n        enableCookieEncryption: true,\n        enableNodeOptionsEnvironmentVariable: true,\n        enableNodeCliInspectArguments: true,\n        enableEmbeddedAsarIntegrityValidation: true,\n        onlyLoadAppFromAsar: true,\n        loadBrowserProcessSpecificV8Snapshot: true,\n        grantFileProtocolExtraPrivileges: undefined, // unsupported on current electron version in our tests\n      },\n    },\n  })\n)\n\ntest.ifDevOrLinuxCi(\"enable Wayland flags\", ({ expect }) =>\n  app(expect, {\n    targets: Platform.LINUX.createTarget(\"flatpak\"),\n    config: {\n      flatpak: {\n        useWaylandFlags: true,\n      },\n    },\n  })\n)\n\ntest.ifDevOrLinuxCi(\"custom finishArgs\", ({ expect }) =>\n  app(expect, {\n    targets: Platform.LINUX.createTarget(\"flatpak\"),\n    config: {\n      flatpak: {\n        finishArgs: [\n          // Wayland\n          \"--socket=wayland\",\n          \"--share=ipc\",\n          // Open GL\n          \"--device=dri\",\n          // Audio output\n          \"--socket=pulseaudio\",\n          // Allow communication with network\n          \"--share=network\",\n          // System notifications with libnotify\n          \"--talk-name=org.freedesktop.Notifications\",\n        ],\n      },\n    },\n  })\n)\n\ntest.ifDevOrLinuxCi(\"custom runtime and base app version\", ({ expect }) =>\n  app(expect, {\n    targets: Platform.LINUX.createTarget(\"flatpak\"),\n    config: {\n      flatpak: {\n        runtimeVersion: \"19.08\",\n        baseVersion: \"19.08\",\n      },\n    },\n  })\n)\n"]}