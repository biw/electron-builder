{"version":3,"file":"HoistedNodeModuleTest.js","sourceRoot":"","sources":["../src/HoistedNodeModuleTest.ts"],"names":[],"mappings":"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","sourcesContent":["import { PM } from \"app-builder-lib/out/node-module-collector\"\nimport { spawn } from \"builder-util/out/util\"\nimport { Arch, DIR_TARGET, Platform } from \"electron-builder\"\nimport { copySync, mkdirSync, outputFile, readJsonSync, rmSync, symlink, writeJsonSync } from \"fs-extra\"\nimport * as path from \"path\"\nimport { appTwoThrows, assertPack, linuxDirTarget, modifyPackageJson, verifyAsarFileTree } from \"./helpers/packTester\"\nimport { ELECTRON_VERSION } from \"./helpers/testConfig\"\nimport { execSync } from \"child_process\"\n\ntest(\"yarn workspace\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"conflict versions\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-workspace-version-conflict\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"yarn several workspaces\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-several-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"yarn several workspaces and asarUnpack\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-several-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n      config: {\n        asarUnpack: [\"**/node_modules/ms/**/*\"],\n      },\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest.ifLinux(\"yarn two package.json w/ native mac-only module (optional dep)\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-two-native-modules\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  )\n)\n\ntest(\"yarn two package.json\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        await modifyPackageJson(projectDir, data => {\n          data.dependencies = {\n            \"electron-updater\": \"6\",\n            express: \"4\",\n            \"patch-package\": \"^8.0.0\",\n          }\n          data.devDependencies = {\n            electron: \"23.2.0\",\n            \"del-cli\": \"6\",\n            \"electron-builder\": \"26\",\n            \"fs-extra\": \"11\",\n          }\n          data.build.directories = {\n            app: \"app\",\n          }\n        })\n\n        mkdirSync(path.join(projectDir, \"app\"))\n        copySync(path.join(projectDir, \"index.html\"), path.join(projectDir, \"app\", \"index.html\"))\n        copySync(path.join(projectDir, \"index.js\"), path.join(projectDir, \"app\", \"index.js\"))\n\n        // delete package.json devDependencies\n        const packageJson = readJsonSync(path.join(projectDir, \"package.json\"))\n        delete packageJson.devDependencies\n        delete packageJson.build\n        delete packageJson.scripts\n        writeJsonSync(path.join(projectDir, \"app\", \"package.json\"), packageJson)\n\n        execSync(\"yarn install\", { cwd: projectDir })\n        execSync(\"yarn install\", { cwd: path.join(projectDir, \"app\") })\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"yarn two package.json without node_modules\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        await modifyPackageJson(projectDir, data => {\n          data.dependencies = {\n            \"electron-updater\": \"6\",\n            express: \"4\",\n            \"patch-package\": \"^8.0.0\",\n          }\n          data.devDependencies = {\n            electron: \"23.2.0\",\n            \"del-cli\": \"6\",\n            \"electron-builder\": \"26\",\n            \"fs-extra\": \"11\",\n          }\n          data.build.directories = {\n            app: \"app\",\n          }\n        })\n\n        // install dependencies in project dir\n        await spawn(\"yarn\", [\"install\"], {\n          cwd: projectDir,\n        })\n\n        mkdirSync(path.join(projectDir, \"app\"))\n        rmSync(path.join(projectDir, \"app\", \"node_modules\"), { recursive: true, force: true })\n        copySync(path.join(projectDir, \"index.html\"), path.join(projectDir, \"app\", \"index.html\"))\n        copySync(path.join(projectDir, \"index.js\"), path.join(projectDir, \"app\", \"index.js\"))\n\n        // delete package.json devDependencies\n        const packageJson = readJsonSync(path.join(projectDir, \"package.json\"))\n        delete packageJson.devDependencies\n        delete packageJson.build\n        delete packageJson.scripts\n        writeJsonSync(path.join(projectDir, \"app\", \"package.json\"), packageJson)\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest.ifWindows(\"should throw when attempting to package a system file\", async ({ expect }) => {\n  const invalidPath = \"C:\\\\Windows\\\\System32\\\\drivers\\\\etc\\\\hosts\"\n  return appTwoThrows(\n    expect,\n    {\n      targets: Platform.WINDOWS.createTarget(\"dir\", Arch.x64),\n      projectDir: \"app\",\n      config: {\n        electronVersion: ELECTRON_VERSION,\n        files: [\"index.js\", \"package.json\", invalidPath],\n      },\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n    },\n    error => {\n      expect(error).toBeInstanceOf(Error)\n      expect(error.message).toContain(\"outside the package to a system or unsafe path\")\n    }\n  )\n})\n\ntest.ifNotWindows(\"should throw when attempting to package a symlink to a system file\", async ({ expect }) => {\n  const invalidPath = \"/etc/passwd\"\n  const buildConfig = {\n    targets: Platform.current().createTarget(\"dir\", Arch.x64),\n    projectDir: \"app\",\n    config: {\n      asar: true,\n      electronVersion: ELECTRON_VERSION,\n    },\n  }\n  await appTwoThrows(\n    expect,\n    buildConfig,\n    {\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        await symlink(invalidPath, path.join(projectDir, \"app\", \"badlink\"))\n      },\n    },\n    error => {\n      expect(error).toBeInstanceOf(Error)\n      expect(error.message).toContain(\"outside the package to a system or unsafe path\")\n    }\n  )\n})\n\ntest(\"yarn workspace for scope name\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-several-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        const subAppDir = path.join(projectDir, \"packages\", \"test-app\")\n        return modifyPackageJson(subAppDir, data => {\n          data.name = \"@scope/xxx-app\"\n          data.dependencies = {\n            \"is-odd\": \"3.0.1\",\n          }\n        })\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n// https://github.com/electron-userland/electron-builder/issues/8493\ntest(\"pnpm es5-ext without hoisted config\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"es5-ext\": \"0.10.53\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"pnpm optional dependencies\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"electron-clear-data\": \"^1.0.5\",\n            }\n            data.optionalDependencies = {\n              debug: \"3.1.0\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest.ifLinux(\"pnpm optional dependency not installable on linux\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"electron-clear-data\": \"^1.0.5\",\n            }\n            data.optionalDependencies = {\n              \"node-mac-permissions\": \"2.3.0\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  )\n)\n\ntest(\"yarn electron-clear-data\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: Platform.WINDOWS.createTarget(DIR_TARGET, Arch.x64),\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"electron-clear-data\": \"^1.0.5\",\n            }\n            data.optionalDependencies = {\n              debug: \"3.1.0\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.WINDOWS)),\n    }\n  ))\n\ntest(\"npm electron-clear-data\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: Platform.WINDOWS.createTarget(DIR_TARGET, Arch.x64),\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.NPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"electron-clear-data\": \"^1.0.5\",\n            }\n            data.optionalDependencies = {\n              debug: \"3.1.0\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.WINDOWS)),\n    }\n  ))\n\n// https://github.com/electron-userland/electron-builder/issues/8842\ntest(\"yarn some module add by manual instead of install\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: Platform.WINDOWS.createTarget(DIR_TARGET, Arch.x64),\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        await outputFile(path.join(projectDir, \"node_modules\", \"foo\", \"package.json\"), `{\"name\":\"foo\",\"version\":\"9.0.0\",\"main\":\"index.js\",\"license\":\"MIT\"}`)\n        await modifyPackageJson(projectDir, data => {\n          data.dependencies = {\n            debug: \"3.1.0\",\n          }\n        })\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.WINDOWS)),\n    }\n  ))\n\n//https://github.com/electron-userland/electron-builder/issues/8857\ntest(\"yarn max stack\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"npm-run-all\": \"^4.1.5\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"pnpm max stack\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"npm-run-all\": \"^4.1.5\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n//github.com/electron-userland/electron-builder/issues/8842\ntest(\"yarn ms\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: async projectDir => {\n        await modifyPackageJson(projectDir, data => {\n          data.dependencies = {\n            \"@sentry/electron\": \"5.11.0\",\n            \"electron-clear-data\": \"^1.0.5\",\n          }\n          data.devDependencies = {\n            electron: \"34.0.2\",\n          }\n        })\n        execSync(\"yarn install\", { cwd: projectDir })\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n//github.com/electron-userland/electron-builder/issues/8426\ntest(\"yarn parse-asn1\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.YARN,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              \"parse-asn1\": \"5.1.7\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n//github.com/electron-userland/electron-builder/issues/8431\ntest(\"npm tar\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.NPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              tar: \"7.4.3\",\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n//github.com/electron-userland/electron-builder/issues/8881\ntest(\"pnpm node-linker=hoisted\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              dayjs: \"1.11.13\",\n            }\n          }),\n          outputFile(path.join(projectDir, \".npmrc\"), \"node-linker=hoisted\"),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\ntest(\"pnpm shamefully-hoist=true\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              dayjs: \"1.11.13\",\n            }\n          }),\n          outputFile(path.join(projectDir, \".npmrc\"), \"shamefully-hoist=true\"),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\ntest(\"pnpm public-hoist-pattern=*\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-hoisted\",\n    {\n      targets: linuxDirTarget,\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(projectDir, data => {\n            data.dependencies = {\n              dayjs: \"1.11.13\",\n            }\n          }),\n          outputFile(path.join(projectDir, \".npmrc\"), \"public-hoist-pattern=*\"),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\ntest(\"pnpm workspace with native module\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-yarn-several-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/test-app\",\n      config: {\n        files: [\n          \"!node_modules/better-sqlite3/**\",\n          {\n            from: \"node_modules/better-sqlite3/build/Release\",\n            to: \"./\",\n            filter: [\"*.node\"],\n          },\n        ],\n      },\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      projectDirCreated: projectDir => {\n        return Promise.all([\n          modifyPackageJson(path.join(projectDir, \"packages\", \"test-app\"), data => {\n            data.dependencies = {\n              \"better-sqlite3\": \"^11.10.0\",\n              debug: \"4.4.3\",\n            }\n            data.devDependencies = {\n              electron: ELECTRON_VERSION,\n            }\n          }),\n        ])\n      },\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n\n// Test pnpm workspace with workspace:* dependencies (link: protocol)\n// This specifically tests that packages using \"workspace:*\" protocol are correctly\n// resolved and bundled. The \"lib\" package is a workspace dependency of \"app\".\ntest(\"pnpm workspace with workspace protocol dependencies\", ({ expect }) =>\n  assertPack(\n    expect,\n    \"test-app-pnpm-workspace\",\n    {\n      targets: linuxDirTarget,\n      projectDir: \"packages/app\",\n    },\n    {\n      storeDepsLockfileSnapshot: true,\n      packageManager: PM.PNPM,\n      packed: context => verifyAsarFileTree(expect, context.getResources(Platform.LINUX)),\n    }\n  ))\n"]}