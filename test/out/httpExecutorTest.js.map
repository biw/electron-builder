{"version":3,"file":"httpExecutorTest.js","sourceRoot":"","sources":["../src/httpExecutorTest.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, test, describe } from \"vitest\"\nimport { HttpExecutor } from \"builder-util-runtime/src/httpExecutor\"\nimport { RequestOptions } from \"http\"\n\ndescribe(\"HttpExecutor.prepareRedirectUrlOptions\", () => {\n  describe(\"basic functionality\", () => {\n    test(\"should configure new options from redirect URL\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        port: \"443\",\n        path: \"/repos/owner/repo/releases/latest\",\n        headers: {\n          \"User-Agent\": \"test-agent\",\n        },\n      }\n\n      const redirectUrl = \"https://api.github.com/repos/owner/repo/releases/12345\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.protocol).toBe(\"https:\")\n      expect(result.hostname).toBe(\"api.github.com\")\n      expect(result.path).toBe(\"/repos/owner/repo/releases/12345\")\n      expect(result.headers?.[\"User-Agent\"]).toBe(\"test-agent\")\n    })\n\n    test(\"should handle relative redirect URLs\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        port: \"443\",\n        path: \"/repos/owner/repo/releases/latest\",\n      }\n\n      const redirectUrl = \"/repos/owner/repo/releases/12345\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.protocol).toBe(\"https:\")\n      expect(result.hostname).toBe(\"api.github.com\")\n      expect(result.path).toBe(\"/repos/owner/repo/releases/12345\")\n    })\n\n    test(\"should handle absolute redirect URLs with different domains\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/github-production-release-asset-12345/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.protocol).toBe(\"https:\")\n      expect(result.hostname).toBe(\"objects.githubusercontent.com\")\n      expect(result.path).toBe(\"/github-production-release-asset-12345/asset.zip\")\n    })\n  })\n\n  describe(\"authorization header handling\", () => {\n    test(\"should preserve authorization header for same-origin redirects\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n        headers: {\n          authorization: \"Bearer token123\",\n        },\n      }\n\n      const redirectUrl = \"https://api.github.com/repos/owner/repo/releases/12345\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.headers?.authorization).toBe(\"Bearer token123\")\n    })\n\n    test(\"should strip authorization header for cross-origin redirects\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n        headers: {\n          authorization: \"Bearer token123\",\n        },\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.headers?.authorization).toBeUndefined()\n    })\n\n    test(\"should preserve other headers when stripping authorization\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n        headers: {\n          authorization: \"Bearer token123\",\n          \"User-Agent\": \"test-agent\",\n          Accept: \"application/json\",\n        },\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.headers?.authorization).toBeUndefined()\n      expect(result.headers?.[\"User-Agent\"]).toBe(\"test-agent\")\n      expect(result.headers?.[\"Accept\"]).toBe(\"application/json\")\n    })\n\n    test(\"should handle missing authorization header gracefully\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n        headers: {\n          \"User-Agent\": \"test-agent\",\n        },\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.headers?.[\"User-Agent\"]).toBe(\"test-agent\")\n      expect(result.headers?.authorization).toBeUndefined()\n    })\n\n    test(\"should handle missing headers gracefully\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/latest\",\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"objects.githubusercontent.com\")\n    })\n  })\n\n  describe(\"cross-origin detection\", () => {\n    describe(\"hostname comparison\", () => {\n      test(\"should treat same hostname as same-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"api.github.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://api.github.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat different hostname as cross-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"api.github.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://objects.githubusercontent.com/asset.zip\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBeUndefined()\n      })\n\n      test(\"should perform case-insensitive hostname comparison\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"API.GitHub.COM\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://api.github.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat case-different hostnames as same-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"api.github.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://API.GITHUB.COM/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n    })\n\n    describe(\"protocol comparison\", () => {\n      test(\"should treat same protocol as same-origin (with same hostname)\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat different protocol as cross-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"http://example.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBeUndefined()\n      })\n\n      test(\"should allow HTTP->HTTPS upgrade on standard ports\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"http:\",\n          hostname: \"example.com\",\n          port: \"80\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com:443/secure/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should allow HTTP->HTTPS upgrade with implicit standard ports\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"http:\",\n          hostname: \"example.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com/secure/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should not allow HTTPS->HTTP downgrade\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"http://example.com/insecure/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBeUndefined()\n      })\n    })\n\n    describe(\"port comparison\", () => {\n      test(\"should treat same explicit ports as same-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          port: \"8443\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com:8443/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat different ports as cross-origin\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          port: \"8443\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com:9443/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBeUndefined()\n      })\n\n      test(\"should treat implicit default ports as equivalent to explicit\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          port: \"443\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat implicit default port as equivalent to explicit (HTTP)\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"http:\",\n          hostname: \"example.com\",\n          port: \"80\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"http://example.com/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should treat explicit port as equivalent to implicit default\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com:443/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBe(\"Bearer token123\")\n      })\n\n      test(\"should handle non-standard ports correctly\", () => {\n        const originalOptions: RequestOptions = {\n          protocol: \"https:\",\n          hostname: \"example.com\",\n          port: \"8080\",\n          headers: { authorization: \"Bearer token123\" },\n        }\n\n        const redirectUrl = \"https://example.com:443/different/path\"\n        const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n        expect(result.headers?.authorization).toBeUndefined()\n      })\n    })\n  })\n\n  describe(\"real-world scenarios\", () => {\n    test(\"should handle GitHub API to GitHub assets redirect\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/assets/12345\",\n        headers: { authorization: \"token ghp_123456789\" },\n      }\n\n      const redirectUrl = \"https://objects.githubusercontent.com/github-production-release-asset-12345/asset.zip?X-Amz-Algorithm=AWS4-HMAC-SHA256\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"objects.githubusercontent.com\")\n      expect(result.headers?.authorization).toBeUndefined()\n      expect(result.path).toContain(\"github-production-release-asset-12345\")\n    })\n\n    test(\"should handle GitHub API to release-assets.githubusercontent.com redirect\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/repos/owner/repo/releases/assets/12345\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://release-assets.githubusercontent.com/asset.zip\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"release-assets.githubusercontent.com\")\n      expect(result.headers?.authorization).toBeUndefined()\n    })\n\n    test(\"should handle Azure Blob Storage redirect\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"releases.myapp.com\",\n        path: \"/download/v1.0.0/app.zip\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://myappstorage.blob.core.windows.net/releases/v1.0.0/app.zip?sv=2020-08-04&ss=b\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"myappstorage.blob.core.windows.net\")\n      expect(result.headers?.authorization).toBeUndefined()\n      expect(result.path).toContain(\"releases/v1.0.0/app.zip\")\n    })\n\n    test(\"should handle AWS S3 redirect\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.myapp.com\",\n        path: \"/releases/latest/download\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://mybucket.s3.amazonaws.com/releases/v1.0.0/app.zip?AWSAccessKeyId=AKIA123\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"mybucket.s3.amazonaws.com\")\n      expect(result.headers?.authorization).toBeUndefined()\n    })\n\n    test(\"should preserve authorization for same-service redirects\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.github.com\",\n        path: \"/user\",\n        headers: { authorization: \"token ghp_123456789\" },\n      }\n\n      const redirectUrl = \"https://api.github.com/user/12345\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"api.github.com\")\n      expect(result.headers?.authorization).toBe(\"token ghp_123456789\")\n    })\n  })\n\n  describe(\"edge cases\", () => {\n    test(\"should handle URLs with query parameters\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.example.com\",\n        path: \"/endpoint?param=value\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://cdn.example.com/asset.zip?token=abc&expires=123\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"cdn.example.com\")\n      expect(result.path).toBe(\"/asset.zip?token=abc&expires=123\")\n      expect(result.headers?.authorization).toBeUndefined()\n    })\n\n    test(\"should handle URLs with fragments\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"api.example.com\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://api.example.com/endpoint#section\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"api.example.com\")\n      expect(result.path).toBe(\"/endpoint\")\n      expect(result.headers?.authorization).toBe(\"Bearer token123\")\n    })\n\n    test(\"should handle URLs with userinfo (should be ignored in comparison)\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"example.com\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://user:pass@example.com/secure/path\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"example.com\")\n      expect(result.headers?.authorization).toBe(\"Bearer token123\")\n    })\n\n    test(\"should handle IPv6 addresses\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"[::1]\",\n        port: \"8443\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://[::1]:8443/different/path\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"[::1]\")\n      expect(result.headers?.authorization).toBe(\"Bearer token123\")\n    })\n\n    test(\"should handle empty path\", () => {\n      const originalOptions: RequestOptions = {\n        protocol: \"https:\",\n        hostname: \"example.com\",\n        headers: { authorization: \"Bearer token123\" },\n      }\n\n      const redirectUrl = \"https://example.com\"\n      const result = HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)\n\n      expect(result.hostname).toBe(\"example.com\")\n      expect(result.path).toBe(\"/\")\n      expect(result.headers?.authorization).toBe(\"Bearer token123\")\n    })\n  })\n})\n\n// @ts-ignore\ndescribe(\"HttpExecutor.isCrossOriginRedirect\", () => {\n  const testCases: Array<{ name: string; url1: string; url2: string; expected: boolean }> = [\n    {\n      name: \"should be false for same hostname, protocol, and port\",\n      url1: \"https://example.com/path\",\n      url2: \"https://example.com/other\",\n      expected: false,\n    },\n    {\n      name: \"should be true for different hostname\",\n      url1: \"https://example.com/path\",\n      url2: \"https://api.example.com/path\",\n      expected: true,\n    },\n    {\n      name: \"should be true for different protocol\",\n      url1: \"https://example.com/path\",\n      url2: \"http://example.com/path\",\n      expected: true,\n    },\n    {\n      name: \"should be true for different port\",\n      url1: \"https://example.com:8080/path\",\n      url2: \"https://example.com:9090/path\",\n      expected: true,\n    },\n    {\n      name: \"should be false for implicit vs explicit default port\",\n      url1: \"https://example.com/path\",\n      url2: \"https://example.com:443/path\",\n      expected: false,\n    },\n    {\n      name: \"should be false for case-insensitive hostname\",\n      url1: \"https://EXAMPLE.com/path\",\n      url2: \"https://example.com/path\",\n      expected: false,\n    },\n    {\n      name: \"SPECIAL CASE: should be false for http -> https upgrade with default ports\",\n      url1: \"http://example.com/path\",\n      url2: \"https://example.com/path\",\n      expected: false,\n    },\n    {\n      name: \"SPECIAL CASE: should be false for http -> https upgrade with explicit default ports\",\n      url1: \"http://example.com:80/path\",\n      url2: \"https://example.com:443/path\",\n      expected: false,\n    },\n    {\n      name: \"SPECIAL CASE: should be true for http -> https upgrade with non-default ports\",\n      url1: \"http://example.com:8080/path\",\n      url2: \"https://example.com:8443/path\",\n      expected: true,\n    },\n  ]\n\n  for (const tc of testCases) {\n    test(tc.name, () => {\n      const url1 = new URL(tc.url1)\n      const url2 = new URL(tc.url2)\n      // @ts-ignore\n      const result = HttpExecutor.isCrossOriginRedirect(url1, url2)\n      expect(result).toBe(tc.expected)\n    })\n  }\n})\n\ndescribe(\"HttpExecutor error handling\", () => {\n  test(\"should throw an error if hostname is missing and authorization header is present\", () => {\n    const originalOptions: RequestOptions = {\n      protocol: \"https:\",\n      path: \"/some/path\",\n      headers: {\n        authorization: \"Bearer token123\",\n      },\n    }\n    const redirectUrl = \"https://example.com/redirect\"\n    expect(() => HttpExecutor.prepareRedirectUrlOptions(redirectUrl, originalOptions)).toThrow(\"Missing hostname in request options\")\n  })\n})\n"]}