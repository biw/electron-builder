{"version":3,"file":"macroExpanderTest.js","sourceRoot":"","sources":["../src/macroExpanderTest.ts"],"names":[],"mappings":";;AAAA,0EAAoE;AAEpE,MAAM,WAAW,GAAQ;IACvB,oBAAoB,EAAE,GAAG;IACzB,WAAW,EAAE,GAAG;IAChB,WAAW,EAAE,GAAG;IAChB,OAAO,EAAE,wBAAwB;IACjC,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;CACX,CAAA;AAED,oEAAoE;AACpE,IAAI,CAAC,yBAAyB,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE;IAC7C,MAAM,MAAM,GAAG,IAAA,2BAAW,EAAC,mCAAmC,EAAE,OAAO,EAAE,WAAW,EAAE,EAAE,EAAE,IAAI,CAAC,CAAA;IAC/F,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAA;AAC9D,CAAC,CAAC,CAAA;AAEF,IAAI,CAAC,wBAAwB,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE;IAC5C,MAAM,MAAM,GAAG,IAAA,2BAAW,EAAC,+BAA+B,EAAE,SAAS,EAAE,WAAW,EAAE,EAAE,EAAE,IAAI,CAAC,CAAA;IAC7F,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;AAC9B,CAAC,CAAC,CAAA;AAEF,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE;IAClC,MAAM,MAAM,GAAG,IAAA,2BAAW,EAAC,+BAA+B,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE,KAAK,CAAC,CAAA;IAC1F,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;AAClC,CAAC,CAAC,CAAA","sourcesContent":["import { expandMacro } from \"app-builder-lib/out/util/macroExpander\"\n\nconst appInfoStub: any = {\n  sanitizedProductName: \"1\",\n  productName: \"2\",\n  companyName: \"3\",\n  version: \"1.8.4+nightly-20210618\",\n  name: \"Test\",\n  ext: \"dmg\",\n}\n\n// https://github.com/electron-userland/electron-builder/issues/5971\ntest(\"${version} macro with +\", ({ expect }) => {\n  const result = expandMacro(\"${name}-${version}-${arch}.${ext}\", \"arm64\", appInfoStub, {}, true)\n  expect(result).toBe(\"Test-1.8.4+nightly-20210618-arm64.dmg\")\n})\n\ntest(\"sanitized product name\", ({ expect }) => {\n  const result = expandMacro(\"${productName}-${arch}.${ext}\", undefined, appInfoStub, {}, true)\n  expect(result).toBe(\"1.dmg\")\n})\n\ntest(\"product name\", ({ expect }) => {\n  const result = expandMacro(\"${productName}-${arch}.${ext}\", \"x64\", appInfoStub, {}, false)\n  expect(result).toBe(\"2-x64.dmg\")\n})\n"]}