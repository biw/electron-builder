{"version":3,"file":"mainEntryTest.js","sourceRoot":"","sources":["../src/mainEntryTest.ts"],"names":[],"mappings":"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","sourcesContent":["import { createTargets, DIR_TARGET, Platform } from \"electron-builder\"\nimport * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { appTwoThrows, assertPack, modifyPackageJson } from \"./helpers/packTester\"\n\nconst packagerOptions = {\n  targets: createTargets([Platform.LINUX, Platform.MAC], DIR_TARGET),\n}\n\ntest.ifLinuxOrDevMac(\"invalid main in the app package.json\", ({ expect }) =>\n  appTwoThrows(expect, packagerOptions, {\n    projectDirCreated: projectDir =>\n      modifyPackageJson(\n        projectDir,\n        data => {\n          data.main = \"main.js\"\n        },\n        true\n      ),\n  })\n)\n\ntest.ifLinuxOrDevMac(\"invalid main in the app package.json (no asar)\", ({ expect }) =>\n  appTwoThrows(expect, packagerOptions, {\n    projectDirCreated: projectDir => {\n      return Promise.all([\n        modifyPackageJson(\n          projectDir,\n          data => {\n            data.main = \"main.js\"\n          },\n          true\n        ),\n        modifyPackageJson(projectDir, data => {\n          data.build.asar = false\n        }),\n      ])\n    },\n  })\n)\n\ntest.ifLinuxOrDevMac(\"invalid main in the app package.json (custom asar)\", ({ expect }) =>\n  appTwoThrows(expect, packagerOptions, {\n    projectDirCreated: projectDir => {\n      return Promise.all([\n        modifyPackageJson(\n          projectDir,\n          data => {\n            data.main = \"path/app.asar/main.js\"\n          },\n          true\n        ),\n        modifyPackageJson(projectDir, data => {\n          data.build.asar = false\n        }),\n      ])\n    },\n  })\n)\n\ntest.ifLinuxOrDevMac(\"main in the app package.json (no asar)\", ({ expect }) =>\n  assertPack(expect, \"test-app\", packagerOptions, {\n    projectDirCreated: projectDir => {\n      return Promise.all([\n        fs.rename(path.join(projectDir, \"app\", \"index.js\"), path.join(projectDir, \"app\", \"main.js\")),\n        modifyPackageJson(\n          projectDir,\n          data => {\n            data.main = \"main.js\"\n          },\n          true\n        ),\n        modifyPackageJson(projectDir, data => {\n          data.build.asar = false\n        }),\n      ])\n    },\n  })\n)\n\ntest.ifLinuxOrDevMac(\"main in the app package.json (custom asar)\", ({ expect }) =>\n  assertPack(expect, \"test-app\", packagerOptions, {\n    projectDirCreated: projectDir => {\n      return Promise.all([\n        modifyPackageJson(\n          projectDir,\n          data => {\n            data.main = \"path/app.asar/index.js\"\n          },\n          true\n        ),\n        modifyPackageJson(projectDir, data => {\n          data.build.asar = false\n        }),\n      ])\n    },\n  })\n)\n"]}