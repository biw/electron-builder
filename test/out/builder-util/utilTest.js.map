{"version":3,"file":"utilTest.js","sourceRoot":"","sources":["../../src/builder-util/utilTest.ts"],"names":[],"mappings":"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","sourcesContent":["import { removePassword } from \"builder-util\"\nimport { describe, it } from \"vitest\"\n\nconst testValue = \"secretValue\"\nconst testQuoted = \"secret with spaces\"\n\nconst keys = [\"--accessKey\", \"--secretKey\", \"-P\", \"-p\", \"-pass\", \"-String\", \"/p\", \"pass:\"]\n\nkeys.forEach(key => {\n  describe(`removePassword: ${key}`, () => {\n    it(\"handles unquoted value (snapshot)\", ({ expect }) => {\n      const input = `${key} ${testValue}`\n      const output = removePassword(input)\n\n      expect(output).toMatchSnapshot()\n    })\n\n    it(\"handles double-quoted value (snapshot)\", ({ expect }) => {\n      const input = `${key} \"${testQuoted}\"`\n      const output = removePassword(input)\n\n      expect(output).toMatchSnapshot()\n    })\n\n    it(\"handles single-quoted value (snapshot)\", ({ expect }) => {\n      const input = `${key} '${testQuoted}'`\n      const output = removePassword(input)\n\n      expect(output).toMatchSnapshot()\n    })\n\n    if (key === \"/p\") {\n      it(\"handles Mac host path without hashing (snapshot)\", ({ expect }) => {\n        const macPath = \"\\\\\\\\Mac\\\\Host\\\\Users\\\\user\"\n        const input = `${key} ${macPath}`\n        const output = removePassword(input)\n\n        expect(output).toMatchSnapshot()\n      })\n    }\n  })\n})\n\ndescribe(\"removePassword: /b … /c block\", () => {\n  it(\"handles /b … /c block (snapshot)\", ({ expect }) => {\n    const secret = \"blockSecret\"\n    const input = `/b ${secret} /c`\n    const output = removePassword(input)\n\n    expect(output).toMatchSnapshot()\n  })\n})\n\ndescribe(\"removePassword: multiple keys in one string\", () => {\n  it(\"handles two keys unquoted (snapshot)\", ({ expect }) => {\n    const input = `--accessKey key1 --secretKey key2`\n    const output = removePassword(input)\n\n    expect(output).toMatchSnapshot()\n  })\n\n  it(\"handles mixed quoted and unquoted keys (snapshot)\", ({ expect }) => {\n    const input = `-p 'quoted secret' -pass unquoted`\n    const output = removePassword(input)\n\n    expect(output).toMatchSnapshot()\n  })\n\n  it(\"handles several keys and /b … /c block (snapshot)\", ({ expect }) => {\n    const input = `pass: val1 --accessKey \"val two\" /b blockpass /c`\n    const output = removePassword(input)\n\n    expect(output).toMatchSnapshot()\n  })\n})\n"]}